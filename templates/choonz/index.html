{% extends 'choonz/base.html' %}
{% load staticfiles %}

{% block title_block %}
	Homepage
{% endblock %}

{% block body_block %}

	<div class="jumbotron p-3 page-header">
		<h2 class="page-header-font" id="greetingText">
		{% if user.is_authenticated %}
			Hi {{user.username }}, ready to get your playlist on?
		{% else %}
			Welcome to Choonz - create, rate and debate music with mates!
		{% endif %}
		</h2>
	</div>

	<div class="container-fluid" id="indexContainer">
		<div class="row">
			<div class="col index-card">
				<div class="index-card-header">
					<h2>Most Rated Playlists</h2>
				</div>
				<div class="card md-4">
					<div class="card-body card-body-frame" id="card-body1">
						{% if most_rated_playlists %}
							<ul class="list-group">
								{% for playlist in most_rated_playlists %}
									<li class="list-group-item see-through">
										<div class="choonz-row-no-border">
		                                    <a class="choonz-badge" href="{% url 'choonz:show_playlist' playlist.slug %}">{{ playlist.name|truncatechars:50 }}</a>
	                                    	<div class="choonz-row-no-border badge-light">
	                                    		Average: 
		                                    	<div class="min-rating" data-rate-value="{{playlist.get_average_rating}}"></div>{{playlist.get_number_of_ratings}} ratings
	                                    	</div>
	                                    </div>
									</li>
								{% endfor %}
							</ul>
						{% else %}
							<strong>There are no playlists present.</strong>
						{% endif %}
					</div>
				</div>
			</div>
			
			<div class="col index-card">
				<div class="index-card-header">
					<h2>Recently Created Playlists</h2>
				</div>
				<div class="card md-4">
					<div class="card-body card-body-frame" id="card-body2">
						{% if recent_playlists %}
							<ul class="list-group">
								{% for playlist in recent_playlists %}
									<li class="list-group-item see-through">
										<div class="choonz-row-no-border">
		                                    <a class="choonz-badge" href="{% url 'choonz:show_playlist' playlist.slug %}">{{ playlist.name|truncatechars:50 }}</a>
	                                    	<div class="choonz-row-no-border badge-light">
	                                    		Average: 
		                                    	<div class="min-rating" data-rate-value="{{playlist.get_average_rating}}"></div>{{playlist.get_number_of_ratings}} ratings
	                                    	</div>
	                                    </div>
									</li>
								{% endfor %}
							</ul>
						{% else %}
							<strong>There are no pages present.</strong>
						{% endif %}
					</div>
				</div>
			</div>
			<div class="col index-card">
				{% if highest_rated_playlists %}
						<div id="recent-playlist-carousel" class="carousel slide" data-ride="carousel" data-interval="20000">
							<div class="carousel-inner">
							    <div class="carousel-item active">
									<div class="index-card-header">	
										<h2>Highest Rated This Week</h2>
									</div>
									<div class="card md-4">
								    	<div class="card-body card-body-frame" id="card-body3">
									      	<ul class="list-group">
												{% for playlist in playlists_this_week %}
													<li class="list-group-item see-through">
														<div class="choonz-row-no-border">
						                                    <a class="choonz-badge" href="{% url 'choonz:show_playlist' playlist.slug %}">{{ playlist.name|truncatechars:50 }}</a>
					                                    	<div class="choonz-row-no-border badge-light">
					                                    		Average:
						                                    	<div class="min-rating" data-rate-value="{{playlist.get_average_rating}}"></div>{{playlist.get_number_of_ratings}} ratings
					                                    	</div>
					                                    </div>
													</li>
												{% endfor %}
											</ul>
										</div>
								    </div>
								</div>
							    <div class="carousel-item">
							    	<div class="index-card-header">	
										<h2>Highest Rated This Month</h2>
									</div>
									<div class="card md-4">
								    	<div class="card-body card-body-frame" id="card-body3">
									    	<ul class="list-group">
												{% for playlist in playlists_this_month %}
													<li class="list-group-item see-through">
														<div class="choonz-row-no-border">
						                                    <a class="choonz-badge" href="{% url 'choonz:show_playlist' playlist.slug %}">{{ playlist.name|truncatechars:50 }}</a>
					                                    	<div class="choonz-row-no-border badge-light">
					                                    		Average:
						                                    	<div class="min-rating" data-rate-value="{{playlist.get_average_rating}}"></div>{{playlist.get_number_of_ratings}} ratings
					                                    	</div>
					                                    </div>
													</li>
												{% endfor %}
											</ul>
										</div>
								    </div>
								</div>
							    <div class="carousel-item">
							    	<div class="index-card-header">	
										<h2>Highest Rated Playlists</h2>
									</div>
									<div class="card md-4">
								    	<div class="card-body card-body-frame" id="card-body3">
									      	<ul class="list-group">
												{% for playlist in highest_rated_playlists %}
													<li class="list-group-item see-through">
														<div class="choonz-row-no-border">
						                                    <a class="choonz-badge" href="{% url 'choonz:show_playlist' playlist.slug %}">{{ playlist.name|truncatechars:50 }}</a>
					                                    	<div class="choonz-row-no-border badge-light">
					                                    		Average:
						                                    	<div class="min-rating" data-rate-value="{{playlist.get_average_rating}}"></div>{{playlist.get_number_of_ratings}} ratings
					                                    	</div>
					                                    </div>
													</li>
												{% endfor %}
											</ul>
										</div>
								    </div>
								</div>
							<a class="carousel-control-prev" href="#recent-playlist-carousel" role="button" data-slide="prev">
							    <span class="carousel-control-prev-icon"></span>
							    <span class="sr-only">Previous</span>
							</a>
							<a class="carousel-control-next" href="#recent-playlist-carousel" role="button" data-slide="next">
							    <span class="carousel-control-next-icon"></span>
							    <span class="sr-only">Next</span>
							</a>
							</div>
						</div>
							
						{% else %}
							<strong>There are no pages present.</strong>
						{% endif %}
					</div>
				</div>
			</div>
		</div>
	</div>

{% endblock %}
